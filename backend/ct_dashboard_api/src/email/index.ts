import type { EmailResult, SMTPConfig } from "@oko-wallet/oko-types/admin";
import { sendEmail } from "@oko-wallet-admin-api/email";

export function generateVerificationCode(): string {
  return Math.floor(100000 + Math.random() * 900000).toString();
}

export async function sendVerificationEmail(
  email: string,
  verification_code: string,
  customer_label: string,
  from_email: string,
  email_verification_expiration_minutes: number,
  smtp_config: SMTPConfig,
): Promise<EmailResult> {
  const subject = `Verification Code for ${customer_label}`;

  const html = `
    <!DOCTYPE html><!--trfcPQVyshtjcLcHYz4z8--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/code-header.png"/><link rel="preload" as="image" href="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-top-left.png"/><link rel="preload" as="image" href="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-top-right.png"/><link rel="preload" as="image" href="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/code-key-icon.png"/><link rel="preload" as="image" href="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-bottom-left.png"/><link rel="preload" as="image" href="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-bottom-right.png"/><link rel="preload" as="image" href="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/logo-footer.png"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-d7602772852bf587.js"/><script src="/_next/static/chunks/87c73c54-0375ba195de27293.js" async=""></script><script src="/_next/static/chunks/18-61ad5d17019a82fb.js" async=""></script><script src="/_next/static/chunks/main-app-fa13277d8c2dafbe.js" async=""></script><title>Oko Email Template</title><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div hidden=""><!--$--><!--/$--></div><div style="background-color:#ededed;font-family:Inter, Arial, sans-serif"><table align="center" role="presentation" cellPadding="0" cellSpacing="0" style="width:100%;background-color:#ededed"><tbody><tr><td style="padding:32px 0 32px 0"><table align="center" role="presentation" cellPadding="0" cellSpacing="0" style="width:600px;max-width:100%;margin:0 auto;border-spacing:0"><tbody><tr><td style="padding:0"><table role="presentation" style="width:100%;background-color:#ededed;border-radius:28px;border-spacing:0" cellPadding="0" cellSpacing="0"><tbody><tr><td style="padding-top:8px;padding-left:8px;padding-right:8px;padding-bottom:8px"><div style="padding:2px"><div style="position:relative;width:100%"><img src="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/code-header.png" width="584" alt="Black Oko header with &#x27;Verify your email to continue&#x27; text" style="display:block;width:584px;max-width:100%;border-radius:20px"/></div><div style="height:685px;width:100%"><table role="presentation" width="100%" cellPadding="0" cellSpacing="0" style="border-spacing:0"><tbody><tr><td align="center" valign="top" style="padding-top:32px"><table role="presentation" width="360" cellPadding="0" cellSpacing="0" style="width:360px;max-width:100%;border-spacing:0"><tbody><tr><td valign="top" style="height:454px"><table role="presentation" width="360" cellPadding="0" cellSpacing="0" style="width:360px;max-width:100%;border-spacing:0;height:454px"><tbody><tr><td><table role="presentation" width="360" cellPadding="0" cellSpacing="0" style="width:360px;height:454px;max-width:100%;border-spacing:0;opacity:1"><tbody><tr><td><table role="presentation" width="360" cellPadding="0" cellSpacing="0" align="center" style="width:360px;height:156px;max-width:100%;border-spacing:0;opacity:1"><tbody><tr><td style="height:156px"><p style="font-family:Inter, Arial, sans-serif;margin:0;color:#1c1b1f;text-align:center;font-weight:500;font-size:16px;line-height:160%;letter-spacing:-0.01em">Hi there,<br/><br/>Enter this code in the Oko dApp Dashboard to verify your email. You can update your password after verification.<br/>The code is valid for<!-- --> <strong>${email_verification_expiration_minutes}<!-- --> <!-- -->minutes</strong>.</p></td></tr></tbody></table></td></tr><tr><td height="32" style="height:32px;line-height:32px;font-size:0"> </td></tr><tr><td><table role="presentation" width="360" align="center" cellPadding="0" cellSpacing="0" style="width:360px;max-width:100%;border-spacing:0;height:182px"><tbody><tr><td style="background-color:#ffffff;border-radius:16px"><table role="presentation" width="100%" cellPadding="0" cellSpacing="0" style="border-spacing:0"><tbody><tr><td align="left" style="padding:10px 0 0 10px"><img src="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-top-left.png" width="16" height="16" alt="" style="display:block;border:0;outline:none;text-decoration:none"/></td><td align="right" style="padding:10px 10px 0 0"><img src="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-top-right.png" width="16" height="16" alt="" style="display:block;border:0;outline:none;text-decoration:none"/></td></tr></tbody></table><table role="presentation" width="100%" cellPadding="0" cellSpacing="0" style="border-spacing:0"><tbody><tr><td align="center" valign="top" style="padding:22px 32px 24px 32px"><table role="presentation" width="296" align="center" cellPadding="0" cellSpacing="0" style="width:296px;max-width:100%;margin:0 auto;border-spacing:0"><tbody><tr><td style="vertical-align:top"><p style="margin:0;font-family:Inter, Arial, sans-serif;font-weight:500;font-size:16px;line-height:160%;letter-spacing:-0.01em;color:#1c1b1f;text-align:center">Your 6-digit code</p></td></tr><tr><td height="16" style="height:16px;line-height:16px;font-size:0"> </td></tr><tr><td><p style="margin:0;font-family:Inter, Arial, sans-serif;font-weight:600;font-size:40px;line-height:100%;letter-spacing:-0.03em;color:#1c1b1f;text-align:center">${verification_code}</p></td></tr><tr><td height="24" style="height:24px;line-height:24px;font-size:0"> </td></tr><tr><td align="center" style="height:24px"><img src="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/code-key-icon.png" width="24" height="24" alt="" style="display:block;width:24px;height:24px"/></td></tr></tbody></table></td></tr></tbody></table><table role="presentation" width="100%" cellPadding="0" cellSpacing="0" style="border-spacing:0"><tbody><tr><td align="left" style="padding:0 0 10px 10px"><img src="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-bottom-left.png" width="16" height="16" alt="" style="display:block;border:0;outline:none;text-decoration:none"/></td><td align="right" style="padding:0 10px 10px 0"><img src="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-bottom-right.png" width="16" height="16" alt="" style="display:block;border:0;outline:none;text-decoration:none"/></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td height="32" style="height:32px;line-height:32px;font-size:0"> </td></tr><tr><td><p style="font-family:Inter, Arial, sans-serif;margin:0;color:#1c1b1f;text-align:center;font-weight:500;font-size:16px;line-height:160%;letter-spacing:-0.01em">If you did not request this code, you can ignore this message.</p></td></tr></tbody></table></td></tr><tr><td height="32" style="height:32px;line-height:32px;font-size:0"> </td></tr><tr><td><table role="presentation" width="360" cellPadding="0" cellSpacing="0" align="center" style="width:360px;max-width:100%;border-spacing:0;height:26px"><tbody><tr><td align="center"><p style="font-family:Inter, Arial, sans-serif;margin:0;color:#1c1b1f;text-align:center;font-weight:500;font-size:16px;line-height:160%;letter-spacing:-0.01em">Oko Team</p></td></tr></tbody></table></td></tr><tr><td height="33.72" style="height:33.72px;line-height:33.72px;font-size:0"> </td></tr><tr><td align="center"><img src="https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/logo-footer.png" width="64" height="25" alt="Gray Oko logo" style="display:block;width:64px;height:25px"/></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div></div></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-d7602772852bf587.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[5341,[],\"\"]\n3:I[25,[],\"\"]\n12:I[4431,[],\"\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"trfcPQVyshtjcLcHYz4z8\",\"p\":\"\",\"c\":[\"\",\"oko_code\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"oko_code\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[\"oko_code\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"div\",null,{\"style\":{\"backgroundColor\":\"#ededed\",\"fontFamily\":\"Inter, Arial, sans-serif\"},\"children\":[\"$\",\"table\",null,{\"align\":\"center\",\"role\":\"presentation\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":{\"width\":\"100%\",\"backgroundColor\":\"#ededed\"},\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"style\":{\"padding\":\"32px 0 32px 0\"},\"children\":[\"$\",\"table\",null,{\"align\":\"center\",\"role\":\"presentation\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":{\"width\":\"600px\",\"maxWidth\":\"100%\",\"margin\":\"0 auto\",\"borderSpacing\":\"0\"},\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"style\":{\"padding\":\"0\"},\"children\":[\"$\",\"table\",null,{\"role\":\"presentation\",\"style\":{\"width\":\"100%\",\"backgroundColor\":\"#ededed\",\"borderRadius\":\"28px\",\"borderSpacing\":\"0\"},\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"style\":{\"paddingTop\":\"8px\",\"paddingLeft\":\"8px\",\"paddingRight\":\"8px\",\"paddingBottom\":\"8px\"},\"children\":[\"$\",\"div\",null,{\"style\":{\"padding\":\"2px\"},\"children\":[[\"$\",\"div\",null,{\"style\":{\"position\":\"relative\",\"width\":\"100%\"},\"children\":[\"$\",\"img\",null,{\"src\":\"https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/code-header.png\",\"width\":\"584\",\"alt\":\"Black Oko header with 'Verify your email to continue' text\",\"style\":{\"display\":\"block\",\"width\":\"584px\",\"maxWidth\":\"100%\",\"borderRadius\":\"20px\"}}]}],[\"$\",\"div\",null,{\"style\":{\"height\":\"685px\",\"width\":\"100%\"},\"children\":[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"100%\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":{\"borderSpacing\":\"0\"},\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"align\":\"center\",\"valign\":\"top\",\"style\":{\"paddingTop\":\"32px\"},\"children\":[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"360\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":{\"width\":\"360px\",\"maxWidth\":\"100%\",\"borderSpacing\":\"0\"},\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"valign\":\"top\",\"style\":{\"height\":\"454px\"},\"children\":[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"360\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":{\"width\":\"360px\",\"maxWidth\":\"100%\",\"borderSpacing\":\"0\",\"height\":\"454px\"},\"children\":[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"children\":[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"360\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":{\"width\":\"360px\",\"height\":\"454px\",\"maxWidth\":\"100%\",\"borderSpacing\":\"0\",\"opacity\":1},\"children\":[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"children\":[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"360\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"align\":\"center\",\"style\":{\"width\":\"360px\",\"height\":\"156px\",\"maxWidth\":\"100%\",\"borderSpacing\":\"0\",\"opacity\":1},\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"style\":{\"height\":\"156px\"},\"children\":[\"$\",\"p\",null,{\"style\":{\"fontFamily\":\"Inter, Arial, sans-serif\",\"margin\":0,\"color\":\"#1c1b1f\",\"textAlign\":\"center\",\"fontWeight\":500,\"fontSize\":\"16px\",\"lineHeight\":\"160%\",\"letterSpacing\":\"-0.01em\"},\"children\":[\"Hi there,\",\"$L4\",\"$L5\",\"Enter this code in the Oko dApp Dashboard to verify your email. You can update your password after verification.\",\"$L6\",\"The code is valid for\",\" \",\"$L7\",\".\"]}]}]}]}]}]}]}],\"$L8\",\"$L9\",\"$La\",\"$Lb\"]}]}]}]}],\"$Lc\",\"$Ld\",\"$Le\",\"$Lf\"]}]}]}]}]}]}]}]}]}]}]}]]}]}]}]}]}]}]}]}]}]}]}]}]}]}],null,\"$L10\"]}],{},null,false]},null,false]},null,false],\"$L11\",false]],\"m\":\"$undefined\",\"G\":[\"$12\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"13:I[5104,[],\"OutletBoundary\"]\n15:I[7158,[],\"AsyncMetadataOutlet\"]\n17:I[5104,[],\"ViewportBoundary\"]\n19:I[5104,[],\"MetadataBoundary\"]\n1a:\"$Sreact.suspense\"\n4:[\"$\",\"br\",null,{}]\n5:[\"$\",\"br\",null,{}]\n6:[\"$\",\"br\",null,{}]\n7:[\"$\",\"strong\",null,{\"children\":[\"$${email_verification_expiration_minutes}\",\" \",\"minutes\"]}]\n8:[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"height\":\"32\",\"style\":{\"height\":\"32px\",\"lineHeight\":\"32px\",\"fontSize\":\"0\"},\"children\":\" \"}]}]\n"])</script><script>self.__next_f.push([1,"9:[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"children\":[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"360\",\"align\":\"center\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":{\"width\":\"360px\",\"maxWidth\":\"100%\",\"borderSpacing\":\"0\",\"height\":\"182px\"},\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"style\":{\"backgroundColor\":\"#ffffff\",\"borderRadius\":\"16px\"},\"children\":[[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"100%\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":{\"borderSpacing\":\"0\"},\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"left\",\"style\":{\"padding\":\"10px 0 0 10px\"},\"children\":[\"$\",\"img\",null,{\"src\":\"https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-top-left.png\",\"width\":\"16\",\"height\":\"16\",\"alt\":\"\",\"style\":{\"display\":\"block\",\"border\":0,\"outline\":\"none\",\"textDecoration\":\"none\"}}]}],[\"$\",\"td\",null,{\"align\":\"right\",\"style\":{\"padding\":\"10px 10px 0 0\"},\"children\":[\"$\",\"img\",null,{\"src\":\"https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-top-right.png\",\"width\":\"16\",\"height\":\"16\",\"alt\":\"\",\"style\":\"$9:props:children:props:children:props:children:props:children:props:children:props:children:0:props:children:props:children:props:children:0:props:children:props:style\"}]}]]}]}]}],[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"100%\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":\"$9:props:children:props:children:props:children:props:children:props:children:props:children:0:props:style\",\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"align\":\"center\",\"valign\":\"top\",\"style\":{\"padding\":\"22px 32px 24px 32px\"},\"children\":[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"296\",\"align\":\"center\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":{\"width\":\"296px\",\"maxWidth\":\"100%\",\"margin\":\"0 auto\",\"borderSpacing\":\"0\"},\"children\":[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"style\":{\"verticalAlign\":\"top\"},\"children\":[\"$\",\"p\",null,{\"style\":{\"margin\":0,\"fontFamily\":\"Inter, Arial, sans-serif\",\"fontWeight\":500,\"fontSize\":\"16px\",\"lineHeight\":\"160%\",\"letterSpacing\":\"-0.01em\",\"color\":\"#1c1b1f\",\"textAlign\":\"center\"},\"children\":\"Your 6-digit code\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"height\":\"16\",\"style\":{\"height\":\"16px\",\"lineHeight\":\"16px\",\"fontSize\":\"0\"},\"children\":\" \"}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"style\":{},\"children\":[\"$\",\"p\",null,{\"style\":{\"margin\":0,\"fontFamily\":\"Inter, Arial, sans-serif\",\"fontWeight\":600,\"fontSize\":\"40px\",\"lineHeight\":\"100%\",\"letterSpacing\":\"-0.03em\",\"color\":\"#1c1b1f\",\"textAlign\":\"center\"},\"children\":\"$${verification_code}\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"height\":\"24\",\"style\":{\"height\":\"24px\",\"lineHeight\":\"24px\",\"fontSize\":\"0\"},\"children\":\" \"}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"align\":\"center\",\"style\":{\"height\":\"24px\"},\"children\":[\"$\",\"img\",null,{\"src\":\"https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/code-key-icon.png\",\"width\":\"24\",\"height\":\"24\",\"alt\":\"\",\"style\":{\"display\":\"block\",\"width\":\"24px\",\"height\":\"24px\"}}]}]}]]}]}]}]}]}]}],[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"100%\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"style\":\"$9:props:children:props:children:props:children:props:children:props:children:props:children:0:props:style\",\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"left\",\"style\":{\"padding\":\"0 0 10px 10px\"},\"children\":[\"$\",\"img\",null,{\"src\":\"https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-bottom-left.png\",\"width\":\"16\",\"height\":\"16\",\"alt\":\"\",\"style\":\"$9:props:children:props:children:props:children:props:children:props:children:props:children:0:props:children:props:children:props:children:0:props:children:props:style\"}]}],[\"$\",\"td\",null,{\"align\":\"right\",\"style\":{\"padding\":\"0 10px 10px 0\"},\"children\":[\"$\",\"img\",null,{\"src\":\"https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/screw-bottom-right.png\",\"width\":\"16\",\"height\":\"16\",\"alt\":\"\",\"style\":\"$9:props:children:props:children:props:children:props:children:props:children:props:children:0:props:children:props:children:props:children:0:props:children:props:style\"}]}]]}]}]}]]}]}]}]}]}]}]\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"height\":\"32\",\"style\":\"$8:props:children:props:style\",\"children\":\" \"}]}]\nb:[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"children\":[\"$\",\"p\",null,{\"style\":{\"fontFamily\":\"Inter, Arial, sans-serif\",\"margin\":0,\"color\":\"#1c1b1f\",\"textAlign\":\"center\",\"fontWeight\":500,\"fontSize\":\"16px\",\"lineHeight\":\"160%\",\"letterSpacing\":\"-0.01em\"},\"children\":\"If you did not request this code, you can ignore this message.\"}]}]}]\nc:[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"height\":\"32\",\"style\":\"$8:props:children:props:style\",\"children\":\" \"}]}]\nd:[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"children\":[\"$\",\"table\",null,{\"role\":\"presentation\",\"width\":\"360\",\"cellPadding\":\"0\",\"cellSpacing\":\"0\",\"align\":\"center\",\"style\":{\"width\":\"360px\",\"maxWidth\":\"100%\",\"borderSpacing\":\"0\",\"height\":\"26px\"},\"children\":[\"$\",\"tbody\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"align\":\"center\",\"children\":[\"$\",\"p\",null,{\"style\":{\"fontFamily\":\"Inter, Arial, sans-serif\",\"margin\":0,\"color\":\"#1c1b1f\",\"textAlign\":\"center\",\"fontWeight\":500,\"fontSize\":\"16px\",\"lineHeight\":\"160%\",\"letterSpacing\":\"-0.01em\"},\"children\":\"Oko Team\"}]}]}]}]}]}]}]\ne:[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"height\":\"33.72\",\"style\":{\"height\":\"33.72px\",\"lineHeight\":\"33.72px\",\"fontSize\":\"0\"},\"children\":\" \"}]}]\nf:[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"align\":\"center\",\"children\":[\"$\",\"img\",null,{\"src\":\"https://oko-wallet.s3.ap-northeast-2.amazonaws.com/assets/email/light/logo-footer.png\",\"width\":\"64\",\"height\":\"25\",\"alt\":\"Gray Oko logo\",\"style\":{\"display\":\"block\",\"width\":\"64px\",\"height\":\"25px\"}}]}]}]\n10:[\"$\",\"$L13\",null,{\"children\":[\"$L14\",[\"$\",\"$L15\",null,{\"promise\":\"$@16\"}]]}]\n11:[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$L17\",null,{\"children\":\"$L18\"}],null],[\"$\",\"$L19\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$1a\",null,{\"fallback\":null,\"children\":\"$L1b\"}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"18:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n14:null\n"])</script><script>self.__next_f.push([1,"16:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Oko Email Template\"}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"1b:\"$16:metadata\"\n"])</script></body></html>
  `;

  console.info(
    "Sending verification email, email: %s, content len: %s",
    email,
    html.length,
  );

  return sendEmail(
    {
      from: from_email,
      to: email,
      subject,
      html,
    },
    smtp_config,
  );
}
